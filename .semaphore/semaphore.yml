version: "v1.0-beta-task"
name: My first pipeline
agent:
  machine:
    type: e1-stg-2
    os_image: ubuntu
blocks:
  - name: "Stage 1"
    task:
      prologue:
        commands:
          - checkout
      epilogue:
        commands:
          - echo "Yay job finished"
          - echo $SEMAPHORE_JOB_RESULT
      env_vars:
        - name: VAR1
          value: Environment Variable 1
        - name: PI
          value: "3.14159"
      jobs:
      - name: Just ls
        commands:
          - pwd
          - echo "test"
          - ls /etc

      - name: List files
        commands:
          - echo "First env var -> $VAR1"
          - echo "My files:"
          - ls -lah

  - name: "Stage 2"
    task:
      jobs:
      - name: Echo job
        commands:
          - checkout
          - pwd
          - echo $SEMAPHORE_PIPELINE_ID
          - echo "Hello from $SEMAPHORE_JOB_ID"
